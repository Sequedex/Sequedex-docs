

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Sequedex 0.9.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="Sequedex 0.9.1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Sequedex 0.9.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <blockquote>
<div><dl class="docutils">
<dt>Sequedex Documentation</dt>
<dd><dl class="first last docutils">
<dt>Joel Berendzen</dt>
<dd>9 May 2012</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<ol class="upperalpha simple">
<li>Overview</li>
</ol>
<p>This is the design document defining the input and output file and
directory structure of the Sequedex package and the associated
analysis scripts based on Sequedex.  This document is the only
specification of the Sequedex ABI. At present, the only interfaces
to Sequedex are through the command line and the file system.</p>
<p>Sequedex is designed to operate at different product levels (Sequescan
free, Sequescan licensed, and Sequedex).  All of these product levels
are referred to as Sequedex for the purposes of this document.  The
Sequescan free version of the code produces a set of statistics that
can be used to reproduce the figures in the paper describing Sequedex
(Berendzen et al., BMC Bioinformatics, 2012).  The licensed versions
of Sequescan adds additional functionality, including an SQLLite
database of classified reads that can later be filtered and extracted
to a FASTA file.  At present, only the Sequescan free version of the
code is available; Sequescan licensed is in beta test.  Contact the
authors if you wish to become a beta tester.  The full Sequedex
product (still in alpha at this point) does indexing of the sequences
(puts the &#8220;dex&#8221; in Sequedex), and thus produces additional statistics,
a set of metagenomic signatures, and a more complete set of graphs of
sequences for downstream assembly.  The full Sequedex also allows
people to calculate signatures on their own trees.</p>
<p>Sequedex is designed to operate with different signature databases.
At present the only database for public release is the one-per-genus
bacterial database, bact403h.  This database was used to produce the
data in the paper.  We have also have produced databases for viruses,
metazoans, lower eukaryotes, a larger set of bacteria and archaea, and
the complete Tree of Life including viruses.  We do not plan on
releasing these additional databases until after initial publication
of the papers describing them.  Contact the authors if you have unique
access to data that could make use of the broader databases and if you
are interested in collaborating on the initial papers.</p>
<p>Sequedex has a public repository, wiki, and mailing list on GitHub at
<a class="reference external" href="http://github.com/joelb123/Sequedex">http://github.com/joelb123/Sequedex</a>.  In the repository will be placed
analysis scripts, documentation, and results of Sequedex runs on other
data sets that you may compare your data to.  Sequedex users should
check the site from time to time.</p>
<ol class="upperalpha simple" start="2">
<li>Command Lines</li>
</ol>
<p>B.1 sequescan</p>
<p>sequescan [-h] | [-v] [-c CONFIGFILE] -d DBNAME [-s SCHEME] [-o OUTDIR] INFILE</p>
<dl class="docutils">
<dt>Options:</dt>
<dd><p class="first">-h prints this help message.  All other options and parameters will be ignored.
-v verbose output to the terminal using the logging system at the log level</p>
<blockquote>
<div>specified in the config file.</div></blockquote>
<dl class="docutils">
<dt>-c CONFIGFILE specifies the location of the config file.  The default value is</dt>
<dd>/etc/sequedex/sequescan.conf.  Sequescan requires a valid config file to run.</dd>
<dt>-d DBNAME specifies the name of the signature database to use.  This must</dt>
<dd>correspond to the name of a jar file (<em>without</em> the &#8221;.jar&#8221;) in the path pointed
to by the config file parameter signature_db_path. As a practice, signature database
directories include the name of their root and the number of interior nodes
they have, e.g. bact403h, viruses1252h.</dd>
<dt>-s SCHEME optionally specifies the classification scheme to be used, e.g., seed_0911.</dt>
<dd>At present only one scheme name may be used at a time.  Some databases may not
define any classification schemes at all (e.g., the current version of the viruses
database.  If you specify a scheme that doesn&#8217;t exist in the signature database, a
fatal error will result.</dd>
</dl>
<p class="last">-o OUTDIR overrides the output directory specified in the configuration file.</p>
</dd>
<dt>Parameters:</dt>
<dd>INFILE is the input file in FASTA format.  Complete paths, relatives paths, and symlinks
may be used here.</dd>
</dl>
<ol class="upperalpha simple" start="3">
<li>Directory structure</li>
</ol>
<p>C.1. Input path</p>
<p>Sequedex requires an input directory path as a command-line argument.
It then searches for files of the extension by the configuration file
parameters input.infile_type and the corresponding input.*ext_list
(e.g., &#8221;.fasta&#8221; for FASTA files).  The input directory path may be as
complicated or as simple as you like, with the only requirement that
all subdirectories must either be listable or explicitly excluded.</p>
<p>However, the contributed scripts that depend on Sequedex employ
an important convention: if more than one input sequence file is
found in the same directory, the data from those files will be
treated as replicates.  The contributed scripts generally expect
to find metadata in the input directories.  The following file names
and contents are conventional for those scripts:</p>
<dl class="docutils">
<dt>metadata.tsv - a tab-separated file containing name:value pairs,</dt>
<dd><p class="first">where the name is in column 1, and the value may
occupy may occupy more than one column.  There
is no requirement that all rows be padded to the same
number of columns. Examples of metadata include names,
collection data, sequencing information, latitude/longitude,
and URLs (project, data retrieval, and links out to other
metadata collections). The order of data in this file is
not important.Common examples of data in this file include:</p>
<blockquote class="last">
<div><blockquote>
<div><dl class="docutils">
<dt>name  Text string for data in this directory.</dt>
<dd>If this key is not present, most scripts
will use the directory name instead.
Name in a directory hierachy may be used
will generally be applied in a hierarchical
fashion, e.g, the lowest-level named &#8220;Control&#8221;
might be appended to higher levels to
produce a name such as
&#8220;Soils/Desert/Nevada/Crust/Control&#8221;.
May include escaped characters obeying
C conventions such as newlines &#8220;n&#8221;.</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>shortName  Short version of the name, e.g. &#8220;-&#8221;.</dt>
<dd><dl class="first last docutils">
<dt>texName  LaTex-compatible version of the name, which</dt>
<dd>for some plotting programs permits a wider
range of text representations such as subscripts,
Greek characters, and color.</dd>
</dl>
</dd>
</dl>
<p>htmlName   As above, only in HTML.</p>
</div></blockquote>
</dd>
<dt>metadata.xls - Spreadsheet-compatible version of the metadata as above, which</dt>
<dd>may include column width and row height sizing preferences.</dd>
</dl>
<p>C.2. Output directory</p>
<p>Sequedex writes all output to the path specified in the configuration
file as dir in the section [output].  Sequedex has only a single
expectation about the output directory, namely write permission.
However, the contributed analysis scripts generally expect the output
directory structure to match the input directory structure, even if
they are in separate hierarchies.  A set of files placed in the output
directory, which are listed by the names of parameters in the [output]
section of the configuration file.</p>
<p>C.2.a dir</p>
<p>Specifies the location of the output directory.</p>
<p>C.2.b logDir</p>
<p>Specifies the location of the log file.</p>
<p>C.2.a who</p>
<p>This is a tab-separated file containing a vector of length nNodes of
counts of reads assigned to the nodes of the phylogenetic tree.</p>
<p>C.2.b what</p>
<p>This is a set of tab-separated files each containing a vector of
length nClasses of counts of the number of fragments assigned to
each class, one file per classification scheme.</p>
<p>C.2.c whoDoesWhat</p>
<p>This is a set of tab-separated files each containing a matrix of size
nNodex by nClasses of counts of the number of fragments assigned to
each class for each node, one file per classification scheme.</p>
<p>C.2.e stats</p>
<p>This is a tab-separated file of summary statistics for the signature
collection. The statistics collected are:</p>
<ol class="arabic simple">
<li>Data In (bp)[int]</li>
<li>Reads In[int]</li>
<li>Reads With Fragments Above Cutoff[int]</li>
<li>Reads Assigned[int]</li>
<li>Single-Signature Reads[int]</li>
<li>Single-Node Reads[int]</li>
<li>Monophyletic Reads[int]</li>
<li>Non-Monophyletic Reads[int]</li>
<li>Frames Processed[int]</li>
<li>Frames With Fragments Above Cutoff[int]</li>
<li>Fragments In[int]</li>
<li>Fragments Above Cutoff[int]</li>
<li>Fragments Assigned[int]</li>
<li>Input Time (ms)[int]</li>
<li>Translate Time (ms)[int]</li>
<li>Match Time (ms)[int]</li>
<li>Assignment Time (ms)[int]</li>
<li>Other Time (ms)[int]</li>
<li>Total Time (ms)[int]</li>
<li>Processing Rate (Gbp/hr)[float]</li>
<li>Percent of Reads Assigned[float]</li>
<li>Total Size of Matched Fragments (bp)[int]</li>
<li>Fragments Assigned To {SchemeName}[int]</li>
</ol>
<p>C.2.f log</p>
<p>This is a log file for the run.  The amount of information written
here is determined by the configuration file parameter global.logLevel.</p>
<p>C.2.g db</p>
<p>This is an SQLLite database of sequences, signatures, phylogeny
assignments, and classifications.  See the schema file for more
details.</p>
<p>C.3. Jar data modules</p>
<p>Sequedex ships with required libraries of signature data. Optionally,
there are also collections of pre-analyzed data from metagenomes and
synthetic reads from sequenced genomes to compare your data against.
The structure of the optional directories are the same as normal Sequedex
output directories as discussed above, with additional analysis products
in the from running a standard set of contributed analysis scripts.</p>
<p>The structure of the signature data library directories is as follows:</p>
<p>$SEQUEDEX_HOME/lib/%DBNAME%</p>
<ol class="upperalpha simple" start="4">
<li>File conventions</li>
</ol>
<p>Sequedex accepts 3 types of input files and produces 3 types of
output files, listed here by the file extension.</p>
<p>D.1. .conf (input)</p>
<p>In addition to command-line parameters, Sequedex uses Windows-style
configuration files to control its behavior that look like this:</p>
<p>; comment
[Section]
name=value ; another comment</p>
<p>Values may have environmental variable surrounded by percent-signs.
Normally these files do not need to be modified, except perhaps to
change output path rules or to limit resource usage.  For further
information on them, consult the example files provided.</p>
<p>D.2. .fasta (input)</p>
<p>FASTA files are currently the only input file type.  Multi-line
descriptions are not supported.  The word following the &#8220;&gt;&#8221; symbol is
the identifier, which must be left as supplied by the sequencer
manufacturer, and must be unique. Inputs are DNA only for
classification and protein only for new scheme calculations.  The
minimum length of 10 amino acids (30 base pairs), and the maximum
length is limited by the memory available on your machine with a
scaling of approximately 20 bytes/base pair.  Ambigious positions will
be ignored.  It is important to trim off adapter and barcode
sequences, but one may be quite liberal about including low-quality
ends of reads because Sequedex will simply not find a signature in
low-quality regions of the read.  Calculation times are approximately
linear in number of base-pairs used.</p>
<p>The input files may be symbolic links to the actual files if one
wishes to keep arbitrary sequencer file names but use &#8220;nice&#8221; file
names for analysis.  The symlink names will be used in this case.</p>
<p>D.3. .phyloxml (input)</p>
<p>Phylogenetic trees are in PhyloXML format as specified at
<a class="reference external" href="http://www.phylosoft.org">http://www.phylosoft.org</a>.  Phylogenetic trees must be specified
at the time signatures are calculated; their connectivity may not
be changed afterwards without re-calculating the signatures.  The
branch lengths, colors, branch widths, and node names may be changed
at any time, however.  Suitable editors and viewers are available
from the web site.</p>
<p>D.4. .log (output)</p>
<p>These are conventional log files whose contents are controlled by
the global.logLevel parameter in the config files.  There is little
information in these files that is not contained in the stats files,
but these files are the first place that you should look if there
seem to be problems with the Sequedex run.</p>
<p>D.5. .tsv (output)</p>
<p>These are tab-separated value files, intended for reading by humans
either directly or through importing into a spreadsheet.  The use of
tabs inside a string value can be accomplished through quotation but
is strongly discouraged due to problems it can cause in downstream
contributed tools.  In addition, we observe the following convention
on our tsv files except those with variable numbers of columns (such
as metadata.tsv).</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">The first line in the file is a header that begins with &#8220;#tsv &#8221;
followed by the number of rows and columns in the table separated
by an &#8220;x&#8221; (for example &#8220;#tsv 403x1008&#8221; for the Who Does What
matrix.  Note that the first column is always interpreted as
string labels, and is not included in this count. Downstream
analysis tools that need to parse this data can treat &#8220;#tsv &#8221;
as a magic number implying that the file will behave the rest
of the standards in this section.  In particular, the first
row and first columns will be interpretable as string labels
specifying unit types and (optionally) units.</p>
</li>
<li><p class="first">Each row of the file contains the same number of tab-separated
columns in the header.</p>
</li>
<li><p class="first">Row and column labels are unicode and may contain any characters
except tabs. Column labels are of the form
&#8220;Free form text (UNITS)[TYPE]&#8221;</p>
<blockquote>
<div><dl class="docutils">
<dt>where:</dt>
<dd><dl class="first last docutils">
<dt>(UNITS) is an optional tag indicating the units of the column.</dt>
<dd><p class="first last">UNITS should be standard units parseable by IUPAC
unit-checking code.</p>
</dd>
<dt>[TYPE] is an optional tag indicating the type of data in the</dt>
<dd><p class="first">row or column if different from string. Valid data
types are:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><blockquote>
<div><p>[int] - indicates the data are integer</p>
</div></blockquote>
<dl class="docutils">
<dt>[float] - indicates the data are floating-point</dt>
<dd><dl class="first last docutils">
<dt>[bool] - indicates the data are boolean with the</dt>
<dd><p class="first last">usual possibilities for encoding (Y/N,
T/F, 1/0).</p>
</dd>
<dt>[list] - indicates the data are a comma-separated</dt>
<dd><p class="first last">list of free-form string data.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>[intList] - indicates the data are a comma-separated</dt>
<dd><p class="first last">list of integer data.</p>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>[floatList] - indicates the data are a comma-separated</dt>
<dd><blockquote class="first">
<div><p>list of floating-point data.</p>
</div></blockquote>
<dl class="last docutils">
<dt>[boolList] - indicates the data are a comma-separated</dt>
<dd><p class="first last">list of boolean data.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p class="last">If any other square-bracketed text occurs at the end of the label,
the whole column will be interpreted as free-form string data.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<p>D.6. .db (output)</p>
<p>These are SQLLite files.  The schema that Sequedex uses is discussed
in a separate document.  A selection tool is provided to turn these
database files into FASTA files and produce other types of reports.</p>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/sequescan-doc.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Sequedex 0.9.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2012, Los Alamos National Security, LLC.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>